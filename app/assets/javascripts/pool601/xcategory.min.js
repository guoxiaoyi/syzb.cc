$define(["wgt_readyload","tmpl"],function(m,u){m.fn.initCategory=function(s){var i=$compCl.getScope(s.compId);e(s,i),a(s,i),m(".js_clickbtn").on("click",function(){m(this).hasClass("icon-arrow_up")&&(m(this).parent().parent().find(".js_clickbtn").addClass("icon-arrow_up").removeClass("icon-arrow_down"),m(this).parent().parent().find(".p_childBox").addClass("hide"))})};var e=function(s,d){var i=s.data;console.log(i);var o=s.params,e=o.boxClass,a=m("."+e,d),t=o.tmplId,c=(o.targetType,0);var n=function s(i){var e=/(http|https):\/\/([\w.]+\/?)\S*/;c++;for(var a=0;a<i.length;a++)i[a].subColumn&&(i[a].children=i[a].subColumn),i[a].childrenList&&(i[a].children=i[a].childrenList),i[a].children&&i[a].children.length||(i[a].parent=!1),i[a].image&&"/"!=i[a].image.substr(0,1)&&0==e.test(i[a].image)&&(i[a].image="/"+i[a].image),!0!==i[a].targetType&&"true"!==i[a].targetType&&"_blank"!=i[a].targetType&&"2"!=i[a].targetType||(i[a].setTarget=!0),i[a].level=c;for(var n=m("#"+t,d).tmpl(i),r=0;r<i.length;r++){var l;i[r].subColumn&&(i[r].children=i[r].subColumn),i[r].childrenList&&(i[r].children=i[r].childrenList),i[r].children&&i[r].children.length&&(l=s(i[r].children),n.eq(r).find("."+o.childBox).html(l))}return n}(i);a.html(n)},a=function(s,i){var e=m.getUrlId(),a=s.params,n=a.isOpen,r=a.isReject,l=a.isSideOut,d=a.boxClass,o=m("."+d,i),t=a.clickBtn,c=m("."+a.clickBtn,o),h=a.parentBox,p=(m("."+a.parentBox,o),a.childBox),C=m("."+a.childBox,o),v=a.linkBox;m("."+a.linkBox,v);n?(C.removeClass("hide"),l||c.removeClass("icon-arrow_up").addClass("icon-arrow_down")):(C.addClass("hide"),l||c.removeClass("icon-arrow_down").addClass("icon-arrow_up")),!l&&e&&(m(i).find("."+h+"[sortid='"+e+"']").parents("."+p).removeClass("hide").prevAll("."+v).children("."+t).removeClass("icon-arrow_up").addClass("icon-arrow_down"),m(i).find("."+h+"[sortid='"+e+"']").children("."+v).addClass("click")),l&&!n?(o.find("."+a.parentBox).each(function(s,i){var e=localStorage.getItem("navChildKey"),a=localStorage.getItem("navParentId");e&&"child"!=e&&e==m(this).attr("sortid")?(m(this).find(".p_childBox:first").prev().addClass("click"),m(this).parents(".p_parentBox").each(function(){m(this).find(".p_childBox:first").prev().addClass("click")})):a==m(this).attr("sortid")&&m(this).find(".p_childBox:first").prev().addClass("click")}),o.find("."+a.parentBox).on("mouseleave",function(){console.log("滑出"),m(this).find("."+p).removeClass("slideOut").addClass("hide")}),o.find(".e_link").on("mouseover",function(){var s=m(this);if(r){s.closest("."+h).siblings("."+h).children("."+p).addClass("hide").removeClass("slideOut");var i=s.parents("."+h)[s.parents("."+h).length-1];m(i).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("slideOut")}0<s.closest("."+h).children("."+p).find("."+h).length&&(s.siblings("div").addClass("slideOut"),s.closest("."+h).children("."+p).removeClass("hide")),u.lazyImg()})):c.on("click",function(){var s=m(this);if(r){s.closest("."+h).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("icon-arrow_down").addClass("icon-arrow_up");var i=s.parents("."+h)[s.parents("."+h).length-1];m(i).siblings("."+h).children("."+p).addClass("hide").siblings("div").children("."+t).removeClass("icon-arrow_down").addClass("icon-arrow_up")}s.hasClass("icon-arrow_down")?(s.removeClass("icon-arrow_down").addClass("icon-arrow_up"),s.closest("."+h).children("."+p).addClass("hide")):(s.removeClass("icon-arrow_up").addClass("icon-arrow_down"),s.closest("."+h).children("."+p).removeClass("hide")),u.lazyImg(),u.setCompPostion()})};return m});