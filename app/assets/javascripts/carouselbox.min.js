function(E){
  return {
      init: function() {
          var n, t, a, e = [],
              r = this._params.params,
              i = E("#" + this._params.id),
              s = i.find(".toLeft"),
              u = i.find(".toRight"),
              o = i.find(".p_carouselbox"),
              c = i.find(">.w_carouselbox"),
              h = i.find(".p_SwipPanelBox"),
              f = i.find(".p_carouselChild").eq(0),
              l = 0,
              p = 0,
              d = r.scrollDirection,
              I = 1e3 * r.delay,
              M = 1e3 * r.runningTime,
              g = r.func,
              v = !1,
              w = "true" == r.autoSwitch,
              b = "true" == r.clickSwitch,
              O = [],
              C = [];
          jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
              def: "easeOutQuad",
              swing: function(n, t, e, a, r) {
                  return jQuery.easing[jQuery.easing.def](n, t, e, a, r)
              },
              easeInQuad: function(n, t, e, a, r) {
                  return a * (t /= r) * t + e
              },
              easeOutQuad: function(n, t, e, a, r) {
                  return -a * (t /= r) * (t - 2) + e
              },
              easeInOutQuad: function(n, t, e, a, r) {
                  return (t /= r / 2) < 1 ? a / 2 * t * t + e : -a / 2 * (--t * (t - 2) - 1) + e
              },
              easeInCubic: function(n, t, e, a, r) {
                  return a * (t /= r) * t * t + e
              },
              easeOutCubic: function(n, t, e, a, r) {
                  return a * ((t = t / r - 1) * t * t + 1) + e
              },
              easeInOutCubic: function(n, t, e, a, r) {
                  return (t /= r / 2) < 1 ? a / 2 * t * t * t + e : a / 2 * ((t -= 2) * t * t + 2) + e
              },
              easeInQuart: function(n, t, e, a, r) {
                  return a * (t /= r) * t * t * t + e
              },
              easeOutQuart: function(n, t, e, a, r) {
                  return -a * ((t = t / r - 1) * t * t * t - 1) + e
              },
              easeInOutQuart: function(n, t, e, a, r) {
                  return (t /= r / 2) < 1 ? a / 2 * t * t * t * t + e : -a / 2 * ((t -= 2) * t * t * t - 2) + e
              },
              easeInQuint: function(n, t, e, a, r) {
                  return a * (t /= r) * t * t * t * t + e
              },
              easeOutQuint: function(n, t, e, a, r) {
                  return a * ((t = t / r - 1) * t * t * t * t + 1) + e
              },
              easeInOutQuint: function(n, t, e, a, r) {
                  return (t /= r / 2) < 1 ? a / 2 * t * t * t * t * t + e : a / 2 * ((t -= 2) * t * t * t * t + 2) + e
              },
              easeInSine: function(n, t, e, a, r) {
                  return -a * Math.cos(t / r * (Math.PI / 2)) + a + e
              },
              easeOutSine: function(n, t, e, a, r) {
                  return a * Math.sin(t / r * (Math.PI / 2)) + e
              },
              easeInOutSine: function(n, t, e, a, r) {
                  return -a / 2 * (Math.cos(Math.PI * t / r) - 1) + e
              },
              easeInExpo: function(n, t, e, a, r) {
                  return 0 == t ? e : a * Math.pow(2, 10 * (t / r - 1)) + e
              },
              easeOutExpo: function(n, t, e, a, r) {
                  return t == r ? e + a : a * (1 - Math.pow(2, -10 * t / r)) + e
              },
              easeInOutExpo: function(n, t, e, a, r) {
                  return 0 == t ? e : t == r ? e + a : (t /= r / 2) < 1 ? a / 2 * Math.pow(2, 10 * (t - 1)) + e : a / 2 * (2 - Math.pow(2, -10 * --t)) + e
              },
              easeInCirc: function(n, t, e, a, r) {
                  return -a * (Math.sqrt(1 - (t /= r) * t) - 1) + e
              },
              easeOutCirc: function(n, t, e, a, r) {
                  return a * Math.sqrt(1 - (t = t / r - 1) * t) + e
              },
              easeInOutCirc: function(n, t, e, a, r) {
                  return (t /= r / 2) < 1 ? -a / 2 * (Math.sqrt(1 - t * t) - 1) + e : a / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + e
              },
              easeInElastic: function(n, t, e, a, r) {
                  var i = 1.70158,
                      s = 0,
                      u = a;
                  return 0 == t ? e : 1 == (t /= r) ? e + a : (s || (s = .3 * r), i = u < Math.abs(a) ? (u = a, s / 4) : s / (2 * Math.PI) * Math.asin(a / u), -u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * r - i) * (2 * Math.PI) / s) + e)
              },
              easeOutElastic: function(n, t, e, a, r) {
                  var i = 1.70158,
                      s = 0,
                      u = a;
                  return 0 == t ? e : 1 == (t /= r) ? e + a : (s || (s = .3 * r), i = u < Math.abs(a) ? (u = a, s / 4) : s / (2 * Math.PI) * Math.asin(a / u), u * Math.pow(2, -10 * t) * Math.sin((t * r - i) * (2 * Math.PI) / s) + a + e)
              },
              easeInOutElastic: function(n, t, e, a, r) {
                  var i = 1.70158,
                      s = 0,
                      u = a;
                  return 0 == t ? e : 2 == (t /= r / 2) ? e + a : (s || (s = r * (.3 * 1.5)), i = u < Math.abs(a) ? (u = a, s / 4) : s / (2 * Math.PI) * Math.asin(a / u), t < 1 ? u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * r - i) * (2 * Math.PI) / s) * -.5 + e : u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * r - i) * (2 * Math.PI) / s) * .5 + a + e)
              },
              easeInBack: function(n, t, e, a, r, i) {
                  return null == i && (i = 1.70158), a * (t /= r) * t * ((i + 1) * t - i) + e
              },
              easeOutBack: function(n, t, e, a, r, i) {
                  return null == i && (i = 1.70158), a * ((t = t / r - 1) * t * ((i + 1) * t + i) + 1) + e
              },
              easeInOutBack: function(n, t, e, a, r, i) {
                  return null == i && (i = 1.70158), (t /= r / 2) < 1 ? a / 2 * (t * t * ((1 + (i *= 1.525)) * t - i)) + e : a / 2 * ((t -= 2) * t * ((1 + (i *= 1.525)) * t + i) + 2) + e
              },
              easeInBounce: function(n, t, e, a, r) {
                  return a - jQuery.easing.easeOutBounce(n, r - t, 0, a, r) + e
              },
              easeOutBounce: function(n, t, e, a, r) {
                  return (t /= r) < 1 / 2.75 ? a * (7.5625 * t * t) + e : t < 2 / 2.75 ? a * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + e : t < 2.5 / 2.75 ? a * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + e : a * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + e
              },
              easeInOutBounce: function(n, t, e, a, r) {
                  return t < r / 2 ? .5 * jQuery.easing.easeInBounce(n, 2 * t, 0, a, r) + e : .5 * jQuery.easing.easeOutBounce(n, 2 * t - r, 0, a, r) + .5 * a + e
              }
          });
          var Q = function(n) {
                  for (var t = n.length - 1; 0 <= t; t--) void 0 !== n[t] && clearInterval(n[t]);
                  e = []
              },
              P = function(n, t) {
                  v = !0;
                  var e = "-" + 100 * t + "%";
                  if ("left" == n) {
                      for (; 0 < f.prevAll().length;) o.append(i.find(".p_carouselChild").first());
                      o.css({
                          left: p,
                          right: "auto"
                      }), o.animate({
                          left: e
                      }, M, g, function() {
                          for (; 0 < t;) o.append(i.find(".p_carouselChild").first()), t--;
                          o.css("left", 0), f = i.find(".p_carouselChild").first(), m(), v = !1, p = 0
                      })
                  } else {
                      for (; 0 < f.nextAll().length;) o.prepend(i.find(".p_carouselChild").last());
                      o.css({
                          left: "auto",
                          right: p
                      }), o.animate({
                          right: e
                      }, M, g, function() {
                          for (; 0 < t;) o.prepend(i.find(".p_carouselChild").last()), t--;
                          o.css("right", 0), f = i.find(".p_carouselChild").last(), m(), v = !1, p = 0
                      })
                  }
              },
              B = function() {
                  v || P("right", 1)
              },
              _ = function() {
                  v || P("left", 1)
              },
              m = function() {
                  l = parseInt(f.attr("id").slice(f.attr("id").lastIndexOf("-") + 1)), h.find(".p_SwipPanel").removeClass("current").eq(l).addClass("current")
              },
              x = function(n) {
                  var t = E(n.target).index();
                  if (0 < t - l) {
                      var e = Math.abs(t - l);
                      v || P("left", e)
                  } else t - l < 0 && (e = Math.abs(t - l), v || P("right", e))
              };
          n = i.css("maxWidth"), t = i.css("width"), a = parseInt(t) >= parseInt(n) ? parseInt(n) : parseInt(t), b && isFrontEnv() && (s.on("click tap", B), u.on("click tap", _), h.on("click tap", x)), w && isFrontEnv() && ("left" == d ? e.push(setInterval(_, I)) : e.push(setInterval(B, I)), c.on("mouseover", function(n) {
              if (/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)) return !1;
              Q(e)
          }), c.on("mouseout", function(n) {
              if (/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)) return !1;
              "left" == d ? e.push(setInterval(_, I)) : e.push(setInterval(B, I))
          })), isFrontEnv() && (h.find(".p_SwipPanel").removeClass("current").eq(l).addClass("current"), i.find(".p_carouselChild").width(parseInt(t) >= parseInt(n) ? n : t), c.height(o.height() + "px"), 0 < i.find("video").length && E.each(i.find("video"), function(n, t) {
              t.addEventListener("canplay", function() {
                  c.height(o.height() + "px")
              })
          }), E(window).resize(function() {
              n = i.css("maxWidth"), t = i.css("width"), a = parseInt(t) >= parseInt(n) ? parseInt(n) : parseInt(t), i.find(".p_carouselChild").width(parseInt(t) >= parseInt(n) ? n : t), i.find(">.w_carouselbox").height(o.height() + "px")
          }), c.on("touchstart", function(n) {
              w && isFrontEnv() && Q(e), O = n.originalEvent.changedTouches
          }), c.on("touchmove", function(n) {
              var t = (C = n.originalEvent.changedTouches)[0].screenX - O[0].screenX,
                  e = C[0].screenY - O[0].screenY;
              if (Math.abs(e) < Math.abs(t) && 0 != t && (n.stopPropagation(), n.preventDefault()), p = "-" + Math.floor(100 * (1 < Math.abs(t) / a ? 1 : Math.abs(t) / a)) + "%", !v)
                  if (t < 0) {
                      for (; 0 < f.prevAll().length;) o.append(i.find(".p_carouselChild").first());
                      o.css({
                          left: p,
                          right: "auto"
                      })
                  } else {
                      for (; 0 < f.nextAll().length;) o.prepend(i.find(".p_carouselChild").last());
                      o.css({
                          left: "auto",
                          right: p
                      })
                  }
          }), c.on("touchend", function(n) {
              var t = n.originalEvent.changedTouches[0].screenX - O[0].screenX;
              p = "-" + Math.floor(100 * (1 < Math.abs(t) / a ? 1 : Math.abs(t) / a)) + "%", 0 < t && 20 <= Math.abs(parseInt(p)) ? 0 < s.lenght ? s.trigger("tap") : B() : 0 < t && Math.abs(parseInt(p)) < 20 ? (v = !0, o.animate({
                  left: "auto",
                  right: 0
              }, 200, function() {
                  v = !1
              })) : t < 0 && 20 <= Math.abs(parseInt(p)) ? 0 < u.lenght ? u.trigger("tap") : _() : t < 0 && Math.abs(parseInt(p)) < 20 && (v = !0, o.animate({
                  left: 0,
                  right: "auto"
              }, 200, function() {
                  v = !1
              })), w && isFrontEnv() && ("left" == d ? e.push(setInterval(_, I)) : e.push(setInterval(B, I)))
          }))
      }
  }

}
